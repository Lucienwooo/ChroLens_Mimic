# 🎮 智能自動戰鬥系統 - 使用指南

## 🚀 快速開始

### 1. 啟動程式
```bash
python 啟動智能戰鬥.py
```

或直接雙擊 `啟動智能戰鬥.py`

### 2. 基本設定（3步驟）

#### ① 遊戲視窗設定
1. 在「遊戲視窗標題」欄位輸入你的遊戲視窗名稱
   - 例如: `MapleStory`, `楓之谷`, `DNF` 等
2. 點擊「🔍 測試連接」確認能鎖定視窗

#### ② 截取圖片
1. 點擊「📸 截取角色」
   - 3秒倒數後,將滑鼠移到角色上方
   - 自動截取 80x80 區域
   
2. 點擊「📸 截取敵人」
   - 同樣方式截取敵人圖片
   - 可添加多個不同敵人

#### ③ 調整參數
- **攻擊範圍**: 拖動滑桿調整 (建議 100-150)
- **補血閾值**: 血量低於此值自動補血 (建議 50-60%)
- **探索時長**: 設定自動運行幾分鐘

### 3. 開始運行
點擊 **▶️ 開始運行** 即可!

---

## 📋 完整功能說明

### ⚙️ 系統配置區

#### 🎯 遊戲視窗設定
- **視窗標題**: 遊戲的視窗名稱
- **測試連接**: 驗證是否能正確鎖定視窗

#### 👤 角色識別
- **選擇模板**: 手動選擇角色圖片
- **快速截取**: 自動截取角色圖片

#### 👾 敵人識別
- **添加模板**: 添加要攻擊的敵人圖片
- **多敵人支援**: 可添加多種敵人類型
- **優先級**: 按添加順序決定攻擊優先級

#### ⌨️ 按鍵設定
系統預設:
- 跳躍: `Alt`
- 攻擊: `Ctrl`
- 技能1-3: `A`, `S`, `D`
- 補血: `Page Up`
- 補魔: `Page Down`

**根據你的遊戲調整對應按鍵!**

#### ⚔️ 戰鬥設定
- **自動攻擊**: 發現敵人後自動攻擊
- **攻擊範圍**: 超過此距離會先移動靠近 (50-200 像素)
- **補血閾值**: 血量百分比,低於此值自動喝水 (10-90%)
- **自動藥水**: 是否啟用自動補給

#### 🗺️ 探索設定
- **探索時長**: 自動運行的時間 (分鐘)
- **探索優先級**: 系統會優先往右探索,然後左、上、下

### 📊 即時狀態顯示

- **運行時間**: 已運行的時長
- **探索位置**: 已探索的地圖位置數量
- **發現敵人**: 偵測到的敵人總數
- **擊殺數量**: 攻擊的敵人數量
- **卡住次數**: 觸發自動脫困的次數

### 🎮 控制面板

- **▶️ 開始運行**: 啟動自動戰鬥
- **⏹️ 停止運行**: 停止運行並保存地圖
- **📸 截取角色**: 快速截取角色圖片
- **📸 截取敵人**: 快速截取敵人圖片
- **📊 查看地圖**: 查看已探索的地圖(開發中)
- **🔧 進階設定**: 更多參數調整(開發中)

### 📝 運行日誌

- 即時顯示系統運行狀態
- 不同顏色表示不同類型訊息:
  - 🔵 藍色: 一般訊息
  - 🟢 綠色: 成功訊息
  - 🟡 黃色: 警告訊息
  - 🔴 紅色: 錯誤訊息

---

## 💡 使用技巧

### 📸 截圖建議
1. **角色圖片**:
   - 選擇角色獨特的部位 (如臉部、武器)
   - 確保對比度清晰
   - 避免包含太多背景

2. **敵人圖片**:
   - 截取敵人最明顯的特徵
   - 如果敵人會變色,多截幾張
   - 確保圖片夠清晰

### ⚙️ 參數調整
1. **找不到角色/敵人**:
   - 重新截取更清晰的圖片
   - 確認遊戲畫質設定
   - 嘗試截取不同角度

2. **移動不順暢**:
   - 檢查按鍵設定是否正確
   - 確認遊戲沒有其他按鍵衝突
   - 可在遊戲設定中調整移動速度

3. **經常卡住**:
   - 系統會自動嘗試脫困
   - 如果地形太複雜,可手動選擇簡單地圖
   - 避免在有大量障礙物的地方使用

### 💾 配置管理
- **保存配置**: 將當前設定保存為 JSON 檔案
- **載入配置**: 快速載入之前的設定
- **自動保存**: 每次啟動會自動載入上次的配置

---

## 🔧 進階功能

### 自適應學習
系統會**自動學習地圖**:
- 記錄哪些位置可以行走
- 記錄哪裡有樓梯/繩索
- 記錄敵人出現的位置
- 下次運行會利用這些知識

### 智能戰鬥
- **自動偵測敵人**: 持續掃描畫面
- **距離判斷**: 太遠會先靠近
- **技能輪替**: 自動使用技能
- **血量監控**: 即時偵測並補血

### 安全機制
- **卡住偵測**: 連續5次無法移動視為卡住
- **自動脫困**: 嘗試跳躍、反向移動等策略
- **血量預警**: 血量過低立即警告
- **統計追蹤**: 完整記錄運行數據

---

## ❓ 常見問題

### Q: 找不到遊戲視窗?
**A**: 
1. 確認遊戲已經開啟
2. 檢查視窗標題是否完全正確
3. 可使用工作管理員查看正確的視窗名稱

### Q: 角色識別失敗?
**A**:
1. 重新截取更清晰的圖片
2. 確保角色在畫面中央
3. 避免截到背景或其他角色

### Q: 不會攻擊敵人?
**A**:
1. 檢查是否勾選「啟用自動攻擊」
2. 確認敵人模板是否正確
3. 調整攻擊範圍參數

### Q: 一直卡住怎麼辦?
**A**:
1. 系統會自動嘗試脫困
2. 選擇地形較簡單的地圖
3. 手動調整移動測試參數

### Q: 如何設定優先攻擊目標?
**A**:
- 敵人按添加順序決定優先級
- 先添加的敵人優先攻擊
- 可刪除後重新添加來調整順序

---

## 📊 配置檔案格式

系統會保存為 JSON 格式:

```json
{
  "window_title": "楓之谷",
  "character_template": "images/char.png",
  "enemy_templates": {
    "蝸牛": "images/snail.png",
    "菇菇": "images/mushroom.png"
  },
  "move_keys": {
    "jump": "alt",
    "attack": "ctrl",
    "skill1": "a"
  },
  "combat": {
    "auto_attack": true,
    "attack_range": 120,
    "hp_threshold": 0.5
  }
}
```

---

## ⚠️ 注意事項

1. **遊戲規則**: 
   - 使用自動化工具可能違反遊戲服務條款
   - 請自行評估風險
   - 建議只在單機或允許的環境使用

2. **系統需求**:
   - Python 3.8+
   - Windows 10/11
   - 需要管理員權限 (用於鍵盤模擬)

3. **安全建議**:
   - 不要長時間無人監控
   - 定期檢查運行狀態
   - 避免在重要任務時使用

---

## 🎯 最佳實踐

### 首次使用流程
1. 選擇簡單的地圖測試
2. 先運行 1-2 分鐘觀察
3. 確認沒問題後延長時間
4. 保存配置供日後使用

### 日常使用流程
1. 載入上次的配置
2. 點擊測試連接確認視窗
3. 調整探索時長
4. 開始運行

### 優化技巧
1. 定期更新角色/敵人圖片
2. 根據遊戲版本調整按鍵
3. 根據地圖特性調整參數
4. 保存多組配置切換使用

---

## 📞 技術支援

遇到問題可以:
1. 查看運行日誌找出錯誤原因
2. 檢查配置是否正確
3. 嘗試重新截取圖片
4. 重啟程式和遊戲

---

**祝你使用愉快! 🎮✨**
