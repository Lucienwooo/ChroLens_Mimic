# ChroLens Mimic v2.8.0 - 進階指令完整範例

## 🎯 目錄
1. [變數系統](#變數系統)
2. [循環控制](#循環控制)
3. [多條件判斷](#多條件判斷)
4. [隨機功能](#隨機功能)
5. [計數器與計時器](#計數器與計時器)
6. [綜合應用範例](#綜合應用範例)

---

## 📦 變數系統

### 基本操作

```
# 設定變數（支援數字和字串）
>設定變數>計數器, 0, T=0s000
>設定變數>玩家名稱, Lucien, T=0s000

# 變數運算
>變數加1>計數器, T=0s100
>變數減1>計數器, T=0s200

# 變數條件判斷
>if變數>計數器, >=, 10, T=0s000
>>#達到10次
>>>#未達到
```

### 實用範例：限制循環次數

```
# 初始化
>設定變數>副本次數, 0, T=0s000

#開始刷副本
>變數加1>副本次數, T=0s100

# 檢查是否達到目標次數
>if變數>副本次數, >=, 5, T=0s000
>>#完成5次
>>>#繼續刷

#繼續刷
>左鍵點擊>開始按鈕, T=0s200
# ... 其他操作 ...
>跳到#開始刷副本, T=2s000

#完成5次
>停止, T=0s000
```

---

## 🔁 循環控制

### 重複N次

```
# 簡單重複
>重複>10次, T=0s000
  >左鍵點擊>收集按鈕, T=0s500
  >等待>200ms, T=0s000
>重複結束, T=0s000
```

### 條件循環（While）

```
# 等待載入完成
>當圖片存在>載入中, T=0s000
  >等待>1s, T=0s000
>循環結束, T=0s000

# 持續攻擊直到敵人消失
>當圖片存在>敵人, T=0s000
  >左鍵點擊>攻擊按鈕, T=0s300
>循環結束, T=0s000
```

### 實用範例：批次處理

```
# 設定計數器
>設定變數>當前項目, 1, T=0s000

#處理循環
>if變數>當前項目, <=, 5, T=0s000
>>#繼續處理
>>>#處理完成

#繼續處理
# 點擊對應項目（使用變數）
>辨識>項目{當前項目}, T=0s000
>左鍵點擊>項目{當前項目}, T=0s200
>等待>500ms, T=0s000

# 增加計數器
>變數加1>當前項目, T=0s000
>跳到#處理循環, T=0s000

#處理完成
>停止, T=0s000
```

---

## 🔀 多條件判斷

### AND條件（全部滿足）

```
# 檢查所有資源是否準備好
>if全部存在>金幣足夠,材料足夠,等級足夠, T=0s000
>>#可以升級
>>>#資源不足

#可以升級
>左鍵點擊>升級按鈕, T=0s200

#資源不足
>左鍵點擊>返回按鈕, T=0s200
```

### OR條件（任一滿足）

```
# 檢查多個可能的按鈕位置
>if任一存在>確認按鈕1,確認按鈕2,確認按鈕3, T=0s000
>>#找到按鈕
>>>#沒找到

#找到按鈕
# 系統會點擊找到的那個按鈕
>左鍵點擊>找到的圖片, T=0s200
```

### 實用範例：遊戲狀態判斷

```
#檢查遊戲狀態
>if任一存在>戰鬥中,載入中,已死亡,已勝利, T=0s000
>>#處理對應狀態
>>>#未知狀態

#處理對應狀態
# 可以根據找到的圖片做不同處理
>if>戰鬥中, T=0s000
>>#繼續戰鬥
>>>#檢查其他

#繼續戰鬥
>左鍵點擊>攻擊, T=0s200
>跳到#檢查遊戲狀態, T=1s000

#檢查其他
>if>已勝利, T=0s000
>>#領取獎勵
>>>#繼續檢查
```

---

## 🎲 隨機功能

### 隨機延遲

```
# 避免被偵測為機器人
>左鍵點擊>按鈕A, T=0s200
>隨機延遲>300ms,800ms, T=0s000
>左鍵點擊>按鈕B, T=0s200
>隨機延遲>500ms,1500ms, T=0s000
```

### 隨機分支

```
# 30%機率走路線A，70%走路線B
>隨機執行>30%, T=0s000
>>#執行路線A
>>>#執行路線B

#執行路線A
>左鍵點擊>位置A, T=0s200
>跳到#結束, T=0s000

#執行路線B
>左鍵點擊>位置B, T=0s200

#結束
>停止, T=0s000
```

### 實用範例：模擬真人行為

```
#開始掛機
# 隨機決定是否休息
>隨機執行>20%, T=0s000
>>#休息一下
>>>#繼續掛機

#休息一下
>等待>5s, T=0s000
>隨機延遲>1000ms,3000ms, T=0s000
>跳到#繼續掛機, T=0s000

#繼續掛機
>左鍵點擊>怪物, T=0s300
>隨機延遲>200ms,600ms, T=0s000
>跳到#開始掛機, T=1s000
```

---

## ⏱️ 計數器與計時器

### 計數器：重複N次後觸發

```
#嘗試找圖
>if>目標按鈕, T=0s000
>>#找到了
>>>#沒找到

#沒找到
# 計數器：失敗3次後跳轉
>計數器>找圖失敗, 3次後, T=0s000
>>#放棄尋找

# 繼續嘗試
>等待>500ms, T=0s000
>跳到#嘗試找圖, T=0s000

#找到了
# 重置計數器
>重置計數器>找圖失敗, T=0s000
>左鍵點擊>目標按鈕, T=0s200

#放棄尋找
>停止, T=0s000
```

### 計時器：超過N秒後觸發

```
#等待載入
# 計時器：60秒後強制跳出
>計時器>等待載入, 60秒後, T=0s000
>>#載入超時

# 檢查是否還在載入
>if>載入中, T=0s000
>>#繼續等待
>>>#載入完成

#繼續等待
>等待>1s, T=0s000
>跳到#等待載入, T=0s000

#載入完成
>重置計時器>等待載入, T=0s000
>跳到#開始遊戲, T=0s000

#載入超時
>按鍵>ESC, T=0s100
>停止, T=0s000
```

### 實用範例：智能重試機制

```
# 初始化
>設定變數>連線嘗試, 0, T=0s000

#嘗試連線
>變數加1>連線嘗試, T=0s100

# 檢查是否超過最大嘗試次數
>if變數>連線嘗試, >, 5, T=0s000
>>#放棄連線
>>>#繼續嘗試

#繼續嘗試
# 計時器：每次嘗試最多等30秒
>計時器>單次連線, 30秒後, T=0s000
>>#單次超時

>if>連線成功, T=0s000
>>#連線完成
>>>#連線失敗

#連線失敗
>重置計時器>單次連線, T=0s000
>等待>2s, T=0s000
>跳到#嘗試連線, T=0s000

#單次超時
>重置計時器>單次連線, T=0s000
>按鍵>ESC, T=0s100
>等待>3s, T=0s000
>跳到#嘗試連線, T=0s000

#連線完成
>重置計數器>連線嘗試, T=0s000
>重置計時器>單次連線, T=0s000
>跳到#開始遊戲, T=0s000

#放棄連線
>停止, T=0s000
```

---

## 🌟 綜合應用範例

### 完整範例：遊戲自動刷本腳本

```
# ========== 遊戲自動刷本腳本 v2.8.0 ==========

# ===== 初始化 =====
>設定變數>完成次數, 0, T=0s000
>設定變數>失敗次數, 0, T=0s000
>設定變數>連續失敗, 0, T=0s000

#主循環
# 檢查是否達到目標次數
>if變數>完成次數, >=, 10, T=0s000
>>#任務完成
>>>#繼續執行

#繼續執行
# 檢查連續失敗次數
>if變數>連續失敗, >=, 3, T=0s000
>>#異常處理
>>>#開始副本

# ===== 開始副本 =====
#開始副本
# 計時器：60秒內必須找到開始按鈕
>計時器>尋找開始按鈕, 60秒後, T=0s000
>>#找按鈕超時

# 嘗試點擊開始按鈕
>if任一存在>開始按鈕,進入按鈕,確認按鈕, T=0s000
>>#找到按鈕
>>>#沒找到按鈕

#找到按鈕
>重置計時器>尋找開始按鈕, T=0s000
>隨機延遲>300ms,800ms, T=0s000
>左鍵點擊>找到的圖片, T=0s200
>跳到#等待載入, T=0s000

#沒找到按鈕
# 計數器：嘗試3次後放棄
>計數器>找按鈕失敗, 3次後, T=0s000
>>#找按鈕超時

>隨機延遲>500ms,1000ms, T=0s000
>跳到#開始副本, T=0s000

# ===== 等待載入 =====
#等待載入
>重置計數器>找按鈕失敗, T=0s000

# 持續等待載入完成（最多120秒）
>計時器>載入中, 120秒後, T=0s000
>>#載入超時

>當圖片存在>載入中, T=0s000
  >隨機延遲>800ms,1200ms, T=0s000
>循環結束, T=0s000

>重置計時器>載入中, T=0s000
>跳到#戰鬥循環, T=0s000

# ===== 戰鬥循環 =====
#戰鬥循環
# 計時器：戰鬥最多5分鐘
>計時器>單次戰鬥, 300秒後, T=0s000
>>#戰鬥超時

# 檢查是否有敵人
>if任一存在>敵人1,敵人2,敵人3,Boss, T=0s000
>>#攻擊敵人
>>>#檢查結果

#攻擊敵人
>隨機延遲>200ms,500ms, T=0s000
>左鍵點擊>找到的圖片, T=0s200

# 隨機使用技能
>隨機執行>40%, T=0s000
>>#使用技能
>>>#普通攻擊

#使用技能
>左鍵點擊>技能按鈕, T=0s150

#普通攻擊
>隨機延遲>300ms,700ms, T=0s000
>跳到#戰鬥循環, T=0s000

# ===== 檢查結果 =====
#檢查結果
>重置計時器>單次戰鬥, T=0s000

# 檢查是否勝利
>if>勝利, T=0s000
>>#戰鬥勝利
>>>#if>失敗, T=0s000
  >>>#戰鬥失敗
  >>>>#未知狀態

#戰鬥勝利
>變數加1>完成次數, T=0s100
>設定變數>連續失敗, 0, T=0s000
>隨機延遲>1000ms,2000ms, T=0s000
>跳到#主循環, T=0s000

#戰鬥失敗
>變數加1>失敗次數, T=0s100
>變數加1>連續失敗, T=0s000
>等待>3s, T=0s000
>跳到#主循環, T=0s000

#未知狀態
# 可能卡住了，嘗試按ESC
>按鍵>ESC, T=0s100
>等待>2s, T=0s000
>跳到#主循環, T=0s000

# ===== 異常處理 =====
#找按鈕超時
>重置計時器>尋找開始按鈕, T=0s000
>重置計數器>找按鈕失敗, T=0s000
>變數加1>失敗次數, T=0s100
>變數加1>連續失敗, T=0s000
>等待>5s, T=0s000
>跳到#主循環, T=0s000

#載入超時
>重置計時器>載入中, T=0s000
>按鍵>ESC, T=0s100
>變數加1>失敗次數, T=0s100
>變數加1>連續失敗, T=0s000
>等待>5s, T=0s000
>跳到#主循環, T=0s000

#戰鬥超時
>重置計時器>單次戰鬥, T=0s000
>按鍵>ESC, T=0s100
>變數加1>失敗次數, T=0s100
>變數加1>連續失敗, T=0s000
>等待>5s, T=0s000
>跳到#主循環, T=0s000

#異常處理
# 連續失敗3次，可能有問題
>設定變數>連續失敗, 0, T=0s000
>等待>10s, T=0s000
>跳到#主循環, T=0s000

# ===== 完成 =====
#任務完成
>停止, T=0s000

# ========== 統計資訊 ==========
# 完成次數: {完成次數}
# 失敗次數: {失敗次數}
# 成功率: {完成次數/(完成次數+失敗次數)*100}%
```

---

## 💡 最佳實踐建議

### 1. 變數命名
- 使用有意義的名稱：`副本次數` 而不是 `count1`
- 避免使用特殊字符和空格

### 2. 計數器與計時器ID
- 使用描述性名稱：`找圖失敗` 而不是 `action1`
- 記得在成功時重置計數器/計時器

### 3. 循環控制
- 避免無限循環：使用計數器或計時器作為安全閥
- 在循環內添加適當延遲，避免CPU占用過高

### 4. 隨機功能
- 適當使用隨機延遲，讓腳本更像真人操作
- 隨機分支可以增加腳本的靈活性

### 5. 錯誤處理
- 為每個關鍵步驟設定超時機制
- 記錄失敗次數，異常時能夠自動恢復

---

## 🔧 除錯技巧

1. **使用變數追蹤狀態**
   ```
   >設定變數>當前步驟, 載入中, T=0s000
   ```

2. **記錄重要事件**
   ```
   >變數加1>錯誤計數, T=0s000
   ```

3. **設定合理的超時時間**
   - 網路操作：30-60秒
   - 畫面載入：60-120秒
   - 戰鬥操作：3-10分鐘

4. **測試各種情況**
   - 成功情況
   - 失敗情況
   - 超時情況
   - 網路異常情況

---

## 📚 相關文檔

- [基礎指令說明](./指令說明.html)
- [圖片辨識進階](./圖片辨識進階.md)
- [常見問題](./FAQ.md)

---

**版本**: v2.8.0  
**更新日期**: 2025年12月5日  
**作者**: Lucienwooo
