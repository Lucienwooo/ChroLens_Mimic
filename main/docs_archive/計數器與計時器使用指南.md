# ChroLens Mimic v2.8.0 - 快速開始指南

## 🚀 新功能快速上手

### 1. 計數器：重複N次後跳轉

**場景**: 找圖失敗3次後，跳到下一個動作

```
#嘗試找圖
>if>目標按鈕, T=0s000
>>#找到了
>>>#沒找到

#沒找到
>計數器>找圖失敗, 3次後, T=0s000
>>#下一步

>等待>500ms, T=0s000
>跳到#嘗試找圖, T=0s000

#找到了
>重置計數器>找圖失敗, T=0s000
>左鍵點擊>目標按鈕, T=0s200

#下一步
# 找圖失敗3次後會跳到這裡
>左鍵點擊>替代按鈕, T=0s200
```

**說明**:
- `>計數器>找圖失敗, 3次後, T=0s000` - 創建計數器，ID為"找圖失敗"，累計3次後觸發
- `>>#下一步` - 達到3次時跳轉的目標
- `>重置計數器>找圖失敗, T=0s000` - 成功後重置計數器

---

### 2. 計時器：超過N分鐘後跳轉

**場景**: 等待載入，60秒後強制跳轉

```
#等待載入
>計時器>等待載入, 60秒後, T=0s000
>>#載入超時

>if>載入中, T=0s000
>>#繼續等待
>>>#載入完成

#繼續等待
>等待>1s, T=0s000
>跳到#等待載入, T=0s000

#載入完成
>重置計時器>等待載入, T=0s000
# 繼續後續操作...

#載入超時
# 60秒後會跳到這裡
>按鍵>ESC, T=0s100
>等待>3s, T=0s000
```

**說明**:
- `>計時器>等待載入, 60秒後, T=0s000` - 創建計時器，ID為"等待載入"，60秒後觸發
- 計時器會在第一次執行時開始計時
- `>重置計時器>等待載入, T=0s000` - 完成後重置計時器

---

### 3. 變數計數：記錄次數

**場景**: 刷副本10次後停止

```
# 初始化
>設定變數>副本次數, 0, T=0s000

#開始
>變數加1>副本次數, T=0s100

# 檢查次數
>if變數>副本次數, >=, 10, T=0s000
>>#完成
>>>#繼續

#繼續
>左鍵點擊>開始按鈕, T=0s200
# ... 其他操作 ...
>跳到#開始, T=2s000

#完成
>停止, T=0s000
```

**說明**:
- `>設定變數>副本次數, 0, T=0s000` - 創建變數並設定初始值為0
- `>變數加1>副本次數, T=0s100` - 每次循環加1
- `>if變數>副本次數, >=, 10, T=0s000` - 檢查是否達到10次

---

### 4. 計時循環：重複N分鐘後跳轉

**場景**: 掛機3分鐘後休息

```
# 初始化計時器
>計時器>掛機時間, 180秒後, T=0s000
>>#休息時間

#掛機循環
>if>怪物, T=0s000
>>#攻擊
>>>#等待

#攻擊
>左鍵點擊>怪物, T=0s300
>等待>500ms, T=0s000
>跳到#掛機循環, T=0s000

#等待
>等待>1s, T=0s000
>跳到#掛機循環, T=0s000

#休息時間
# 3分鐘後會跳到這裡
>重置計時器>掛機時間, T=0s000
>等待>30s, T=0s000
# 重新開始計時
>跳到#掛機循環, T=0s000
```

---

## 📋 計數器 vs 計時器 比較

| 功能 | 計數器 | 計時器 |
|------|--------|--------|
| **觸發條件** | 執行N次後觸發 | 經過N秒後觸發 |
| **使用場景** | 重試次數限制、循環計數 | 超時保護、定時任務 |
| **開始時機** | 立即開始計數 | 第一次執行時開始計時 |
| **重置方式** | `>重置計數器>ID, T=0s000` | `>重置計時器>ID, T=0s000` |

---

## 🎯 實用模式

### 模式1：安全重試（計數器+延遲）

```
#嘗試操作
>if>目標, T=0s000
>>#成功
>>>#失敗

#失敗
>計數器>重試次數, 3次後, T=0s000
>>#放棄

>等待>2s, T=0s000
>跳到#嘗試操作, T=0s000

#成功
>重置計數器>重試次數, T=0s000

#放棄
>停止, T=0s000
```

### 模式2：超時保護（計時器+循環）

```
#開始任務
>計時器>任務超時, 300秒後, T=0s000
>>#任務超時

>當圖片存在>進行中, T=0s000
  >等待>1s, T=0s000
>循環結束, T=0s000

>重置計時器>任務超時, T=0s000
# 任務完成...

#任務超時
>按鍵>ESC, T=0s100
```

### 模式3：計數+計時組合

```
# 初始化
>設定變數>嘗試次數, 0, T=0s000

#重試循環
>變數加1>嘗試次數, T=0s100

# 檢查次數
>if變數>嘗試次數, >, 10, T=0s000
>>#放棄
>>>#繼續

#繼續
# 單次嘗試最多等30秒
>計時器>單次嘗試, 30秒後, T=0s000
>>#單次超時

>if>連線成功, T=0s000
>>#連線OK
>>>#連線失敗

#連線失敗
>重置計時器>單次嘗試, T=0s000
>等待>3s, T=0s000
>跳到#重試循環, T=0s000

#單次超時
>重置計時器>單次嘗試, T=0s000
>跳到#重試循環, T=0s000

#連線OK
>停止, T=0s000

#放棄
>停止, T=0s000
```

---

## ⚡ 性能提示

1. **計時器開銷較小**: 計時器只在需要時檢查時間，不會持續占用CPU
2. **計數器幾乎無開銷**: 只是簡單的數字遞增
3. **建議使用**: 優先使用計時器而非手動計算時間

---

## 🐛 常見錯誤

### 錯誤1：忘記重置計數器

```
# ❌ 錯誤：計數器不會自動重置
#成功
>左鍵點擊>按鈕, T=0s200
# 下次循環計數器仍然保留

# ✅ 正確：手動重置
#成功
>重置計數器>找圖失敗, T=0s000
>左鍵點擊>按鈕, T=0s200
```

### 錯誤2：計時器ID不一致

```
# ❌ 錯誤：ID不一致
>計時器>等待Loading, 60秒後, T=0s000
>重置計時器>等待載入, T=0s000  # ID不同！

# ✅ 正確：ID必須完全一致
>計時器>等待載入, 60秒後, T=0s000
>重置計時器>等待載入, T=0s000
```

### 錯誤3：無限循環沒有安全閥

```
# ❌ 危險：可能無限循環
#循環
>if>目標, T=0s000
>>#找到
>>>#沒找到

#沒找到
>跳到#循環, T=0s000

# ✅ 安全：添加計數器或計時器
#循環
>計數器>循環次數, 100次後, T=0s000
>>#超過限制

>if>目標, T=0s000
>>#找到
>>>#沒找到

#沒找到
>跳到#循環, T=0s000

#超過限制
>停止, T=0s000
```

---

## 📚 進一步學習

查看完整範例：`docs_archive/進階指令範例_v2.8.0.md`

**版本**: v2.8.0  
**更新**: 2025年12月5日
